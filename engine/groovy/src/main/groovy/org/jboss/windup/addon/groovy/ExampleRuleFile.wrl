/*
 * Copyright 2014 Red Hat, Inc. and/or its affiliates.
 *
 * Licensed under the Eclipse Public License version 1.0, available at
 * http://www.eclipse.org/legal/epl-v10.html
 */
package org.jboss.windup.addon.groovy

import org.jboss.windup.addon.config.RulePhase
import org.jboss.windup.addon.config.WindupConfigurationProvider
import org.jboss.windup.addon.config.graphsearch.GraphSearchConditionBuilder
import org.jboss.windup.addon.config.operation.Log
import org.jboss.windup.graph.GraphContext
import org.jboss.windup.graph.model.meta.javaclass.JavaClassMetaModel
import org.ocpsoft.logging.Logger.Level
import org.ocpsoft.rewrite.config.Configuration
import org.ocpsoft.rewrite.config.ConfigurationBuilder

/**
 * @author <a href="mailto:lincolnbaxter@gmail.com">Lincoln Baxter, III</a>
 *
 */
class ExampleRuleFile extends WindupConfigurationProvider {
    @Override
    public RulePhase getPhase() {
        return RulePhase.MIGRATION_RULES;
    }

    @Override
    public Configuration getConfiguration(GraphContext context) {
        return ConfigurationBuilder.begin()
        .addRule()
        .when(
        GraphSearchConditionBuilder.create("javaClasses").ofType(JavaClassMetaModel.class)
        )
        .perform(
        Log.message(Level.INFO, "Sample groovy rule")
        )
    }
}
